import hashlib


class TornadoFile(object):
    def __init__(self, sha, blob, name):
        self.sha256 = sha
        self.blob = blob
        self.name = name

    @staticmethod
    def create_from_request(trequest):
        if len(trequest.files.keys()) > 0 and 'file' in trequest.files.keys():
            tfile = trequest.files['file'][0]
            sha = hashlib.sha256(tfile['body']).hexdigest().lower()
            return TornadoFile(sha, tfile['body'], tfile['filename'])
        else:
            return None
